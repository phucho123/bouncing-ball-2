(()=>{"use strict";var e,t={478:(e,t,i)=>{var s=i(260),a=i.n(s);const o=Math.min(500,window.innerWidth),r=window.innerHeight,h=[15759480,10146549,16109717,11336381],l=["normalball","basketball","football","volleyball","tennisball","pokeball","cannonbolt","dragonball"],n=[0,10,20,30,40,50,60,70];class c extends Phaser.Scene{constructor(){super({key:"Shop Scene"})}create(){console.log("Create Shop Scene"),this.balls=[],this.ballKey=l,this.gemNeedToPay=n,this.gemNeedToPayDisplay=[],this.getBoughtBall(),this.add.image(10,10,"back").setOrigin(0).setScale(.1).setInteractive().on("pointerdown",(()=>{this.scene.switch("Start Scene")})),this.add.text(o/2,10,"Shop",{fontSize:"32px",fontFamily:"Arial",color:"#000000",testString:"1234y"}).setStroke("black",1).setOrigin(.5,0);const e=this.add.image(o-10,10,"gem").setOrigin(1,0);e.setScale(50/e.displayWidth),this.playerGameDisplay=this.add.text(e.x-e.displayWidth-10,10,`${c.playerGem}`,{fontSize:"16px",color:"0x000000"}).setOrigin(1,0),this.createBallList()}createBall(e,t,i,s){const a=this.add.image(t,i,e).setOrigin(0);a.setScale(100/a.width).setInteractive().on("pointerdown",(()=>{if(c.playerGem>=this.gemNeedToPay[s]){if(c.playerGem-=this.gemNeedToPay[s],this.gemNeedToPay[s]>0){const e=localStorage.getItem("boughtBall");e&&localStorage.setItem("boughtBall",e+` ${s}`)}c.chosenBall=s,this.gemNeedToPay[s]=0,this.gemNeedToPayDisplay[s].setText("0"),localStorage.setItem("chosenBall",s.toString()),localStorage.setItem("totalGem",c.playerGem.toString());for(const e of this.balls)e.setAlpha(1);a.setAlpha(.3)}})),c.chosenBall==s&&a.setAlpha(.3),this.balls.push(a)}createGemDisplay(e,t,i){const s=this.add.text(e,t,`${i}`,{color:"0x000000",fontSize:"16px"}).setOrigin(.5);s.setY(t+s.displayHeight/2),this.gemNeedToPayDisplay.push(s)}createBallList(){const e=(o-100*Math.floor(o/100))/2,t=Math.floor(o/100);for(let i=0;i<this.ballKey.length;i++){const s=i%t,a=Math.floor(i/t);this.createBall(this.ballKey[i],e+100*s,50*a*2+100+16*a,i),this.createGemDisplay(e+100*s+50,50*a*2+100+100+16*a,this.gemNeedToPay[i])}}getBoughtBall(){const e=localStorage.getItem("boughtBall");if(e){const t=e.split(" ");for(const e of t)this.gemNeedToPay[parseInt(e)]=0}}update(){this.playerGameDisplay.setText(`${c.playerGem}`)}}class d{constructor(e){this.scene=e,this.init()}static getInstance(e){return null==d.instance&&(console.log("Create new Audio Manager"),d.instance=new d(e)),d.instance}init(){this.gemAudio=this.scene.sound.add("gem-audio"),this.gemAudio.setRate(1.5),this.hitAudio=this.scene.sound.add("hit-audio"),this.hitAudio.setRate(1.5),this.dieAudio=this.scene.sound.add("die-audio"),this.fireAudio=this.scene.sound.add("fire-audio").setLoop(!0),this.spikeAudio=this.scene.sound.add("spike-audio"),this.spikeAudio.setRate(1.5)}playGemAudio(){this.gemAudio.play()}pauseGemAudio(){this.gemAudio.pause()}playHitAudio(){this.hitAudio.play()}pauseHitAudio(){this.hitAudio.pause()}playDieAudio(){this.dieAudio.play()}pauseDieAudio(){this.dieAudio.pause()}playFireAudio(){this.fireAudio.play()}pauseFireAudio(){this.fireAudio.pause()}playSpikeAudio(){this.spikeAudio.play()}pauseSpikeAudio(){this.spikeAudio.pause()}mute(){this.gemAudio.setMute(!0),this.hitAudio.setMute(!0),this.dieAudio.setMute(!0),this.fireAudio.setMute(!0),this.spikeAudio.setMute(!0)}unMute(){this.gemAudio.setMute(!1),this.hitAudio.setMute(!1),this.dieAudio.setMute(!1),this.fireAudio.setMute(!1),this.spikeAudio.setMute(!1)}pauseSound(){this.gemAudio.pause(),this.hitAudio.pause(),this.dieAudio.pause(),this.fireAudio.pause(),this.spikeAudio.pause()}resumeSound(){this.gemAudio.resume(),this.hitAudio.resume(),this.dieAudio.resume(),this.fireAudio.resume(),this.spikeAudio.resume()}stopSound(){this.gemAudio.stop(),this.hitAudio.stop(),this.dieAudio.stop(),this.fireAudio.stop(),this.spikeAudio.stop()}}d.instance=null;class p{constructor(e){this.scene=e,this.arr=[]}clear(){for(const e of this.arr)e.setX(-1e3)}move(e,t){for(const i of this.arr)i.setX(i.x+e),1==i.state&&i.setY(i.y+t)}get(){return this.arr}}class g extends p{constructor(e){super(e)}create(e,t){if(0!=Phaser.Math.Between(0,100)%5)return;let i;const s=this.arr.filter((e=>e.x+e.displayWidth/2<=0||0==e.alpha));0==s.length?(i=this.scene.add.image(e,t,"gem"),i.setScale(20/i.width),this.arr.push(i),console.log("create New Gem")):i=s[0],i&&(0==Phaser.Math.Between(1,100)%5?(i.setTexture("firegem"),i.setScale(20/i.width)):(i.setTexture("gem"),i.setScale(20/i.width)),i.setState(0),i.setAlpha(1),i.setPosition(e,t-i.displayHeight/2))}createWithTiled(e,t,i){if(""==i)return;let s;const a=this.arr.filter((e=>e.x+e.displayWidth/2<=0||0==e.alpha));0==a.length?(s=this.scene.add.image(e,t,"gem"),s.setScale(20/s.width),this.arr.push(s),console.log("create New Gem")):s=a[0],s&&("firegem"==i?(s.setTexture("firegem"),s.setScale(20/s.width)):(s.setTexture("gem"),s.setScale(20/s.width)),s.setState(0),s.setAlpha(1),s.setPosition(e,t-s.displayHeight/2))}}class m extends p{constructor(e){super(e)}create(e,t,i,s){if(s<1.1)return;if(3!=Phaser.Math.Between(0,5))return;const a=Phaser.Math.Between(0,1);let o;const r=this.arr.filter((e=>e.x+e.displayWidth/2<=0));0==r.length?(o=this.scene.add.image(e,t,"spike").setScale(.3),this.arr.push(o),console.log("create New Spike")):o=r[0],o&&(o.setState(0),o.setAlpha(1).setDepth(0),0==a?o.setPosition(e-i/2+o.displayWidth/2,t-o.displayHeight/2):o.setPosition(e+i/2-o.displayWidth/2,t-o.displayHeight/2))}createWithTile(e,t,i,s){if(""==s)return;let a;const o=this.arr.filter((e=>e.x+e.displayWidth/2<=0));0==o.length?(a=this.scene.add.image(e,t,"spike").setScale(.3),this.arr.push(a),console.log("create New Spike")):a=o[0],a&&(a.setState(0),a.setAlpha(1).setDepth(0),"left"==s?a.setPosition(e-i/2+a.displayWidth/2,t-a.displayHeight/2):a.setPosition(e+i/2-a.displayWidth/2,t-a.displayHeight/2))}}class u extends p{constructor(e){super(e)}create(e,t,i,s,a){let o;const r=this.arr.filter((e=>e.x+e.displayWidth/2<=0));0==r.length?(o=this.scene.add.rectangle(e,t,i,s,16711680).setDepth(0).setOrigin(.5,0),console.log("create New Pipe"),this.arr.push(o)):o=r[0],o&&(o.displayWidth=i,o.displayHeight=s,o.setPosition(e,t),o.setState(0),o.fillColor=a)}}class y extends p{constructor(e){super(e)}create(e,t,i,s,a,o){let r;const h=this.arr.filter((e=>e.x+e.displayWidth/2<=0));0==h.length?(r=this.scene.add.rectangle(e,t,i/3,s,16711680).setDepth(3),this.arr.push(r),console.log("create New Spike")):(r=h[0],r&&(r.setY(t),r.scaleX=i/(3*r.width))),null!=r&&(a<-i/6?r.setX(e-i/3):a>i/6?r.setX(e+i/3):r.setX(e),r.fillColor=o,r.setState(1))}}class S extends p{constructor(e){super(e)}create(e,t,i){let s;const a=this.arr.filter((e=>e.x+e.displayWidth/2<=0));return 0==a.length?(s=this.scene.matter.add.image(0,0,"floor").setBounce(0),s.setState(-1),console.log("create New Floor"),this.arr.push(s)):s=a[0],s&&(s.setStatic(!0).setY(t),null==e?s.setX(o+s.displayWidth/2):s.setX(e),s.scaleX=i,s.setDepth(2)),s}}class f{constructor(e){this.scene=e,this.hitEmitter=this.scene.add.particles(100,150,"red",{lifespan:2e3,speed:{min:100,max:200},scale:{start:.6,end:.1},gravityX:-500,emitting:!1}).setScale(.2),this.fireEmitter=this.scene.add.particles(0,0,"whitefire",{color:[16436258,16291840,16266752,10421252],x:0,y:0,lifespan:500,angle:{min:-100,max:-80},scale:{start:.4,end:0,ease:"sine.in"},speed:{min:200,max:300},alpha:{start:.7,end:.3},advance:2e3,emitting:!1,colorEase:"quart.out"}).setDepth(3).setVisible(!1)}startHitEmitter(e,t){e?(this.hitEmitter.gravityX=0,this.hitEmitter.gravityY=-500*t/7,this.hitEmitter.explode(16)):(this.hitEmitter.gravityX=-500*t/7,this.hitEmitter.gravityY=0,this.hitEmitter.explode(3)),this.hitEmitter.start(),this.hitEmitter.setVisible(!0)}stopHitEmitter(){this.hitEmitter.stop(),this.hitEmitter.setVisible(!1)}moveHitEmitter(e,t){this.hitEmitter.setX(this.hitEmitter.x+e),this.hitEmitter.setY(this.hitEmitter.y+t)}setHitEmitterPosition(e,t){this.hitEmitter.setPosition(e,t)}setColorHitEmitter(e){this.hitEmitter.setTexture(e)}startFireEmitter(){this.fireEmitter.start(),this.fireEmitter.setVisible(!0)}stopFireEmitter(){this.fireEmitter.stop(),this.fireEmitter.setVisible(!1)}setFireEmitterPosition(e,t){this.fireEmitter.setPosition(e,t)}}class x{constructor(e){this.scene=e,this.floors=new S(this.scene),this.pipes=new u(this.scene),this.gems=new g(this.scene),this.spikes=new m(this.scene),this.hitPoints=new y(this.scene),this.colors=h,this.floorSpeed=-3,this.jumpSpeed=-10,this.fallSpeed=10,this.timeToChangeColor=5,this.colorIndex=0,this.timeToSpawnObject=60,this.countTimeToSpawnObject=this.timeToSpawnObject,this.floorDownSpeed=2,this.delta=7,this.timeToFire=0,this.perfect=!1,this.comboDisplay=this.scene.add.text(100,200,"Perfect",{fontSize:"20px",fontFamily:"Arial",color:"#1c2070",testString:"1234y"}).setAlpha(0).setOrigin(.5).setDepth(10),this.combo=0,this.audioManager=d.getInstance(this.scene)}static getInstance(e){return x.instance||(x.instance=new x(e)),x.instance}initial(){this.initialBall(),this.emitter=new f(this.scene)}initialBall(){this.ball=this.scene.matter.add.image(0,0,"normalball"),this.ball.setScale(50/this.ball.width).setCircle(this.ball.displayWidth/2).setFriction(.005).setBounce(0).setMass(3).setDepth(5).setPosition(250,35).setOnCollide((()=>{this.audioManager.playHitAudio(),this.ball.setVelocity(0,Math.max(this.jumpSpeed*this.delta/7,-12)),b.score++,this.timeToChangeColor--,b.start=!0,this.timeToFire>0&&this.timeToFire--,this.emitter.setHitEmitterPosition(this.ball.x,this.ball.y+this.ball.displayHeight/2),this.emitter.startHitEmitter(this.perfect,this.delta)})),this.scene.input.on("pointerdown",(()=>{b.gameOver||this.ball.setVelocity(0,Math.min(this.fallSpeed*this.delta/7,12))}))}setFloorCollideEvent(e){e.setOnCollide((()=>{if(e){e.setState(1);const t=this.pipes.get().filter((t=>t.x==e.x));t[0]&&t[0].setState(1);const i=this.gems.get().filter((t=>{if(e)return t.x==e.x}));i[0]&&i[0].setState(1);const s=this.spikes.get().filter((t=>{if(e)return t.x<=e.x+e.displayWidth/2&&t.x>=e.x-e.displayWidth/2}));if(s.length&&s.forEach((e=>e.setState(1))),this.hitPoints.create(e.x,e.y,e.displayWidth,e.displayHeight,this.ball.x-e.x,this.colors[this.colorIndex]),this.ball.x-e.x<-e.displayWidth/6)this.perfect=!1,this.combo=0,this.spikes.get().filter((t=>t.x<e.x&&t.x>e.x-e.displayWidth/2))[0]&&this.timeToFire<=0&&(b.gameOver=!0,this.audioManager.playSpikeAudio()),this.emitter.startHitEmitter(this.perfect,this.delta);else if(this.ball.x-e.x>e.displayWidth/6)this.combo=0,this.perfect=!1,this.spikes.get().filter((t=>t.x>e.x&&t.x<e.x+e.displayWidth/2))[0]&&this.timeToFire<=0&&(b.gameOver=!0,this.audioManager.playSpikeAudio()),this.emitter.startHitEmitter(this.perfect,this.delta);else{this.combo++,this.perfect=!0;const t=this.gems.get().filter((t=>t.x==e.x))[0];if(t&&t.alpha){if(t.setAlpha(0),b.score+=5,"firegem"==t.texture.key){if(this.timeToFire<=0){this.emitter.startFireEmitter();const e=document.getElementById("game");e&&(e.style.backgroundColor="#000000"),this.audioManager.playFireAudio()}this.timeToFire+=20}else c.playerGem++,localStorage.setItem("totalGem",c.playerGem.toString());this.audioManager.playGemAudio()}this.emitter.startHitEmitter(this.perfect,this.delta)}}}))}createObject(e,t,i,s,a){this.countTimeToSpawnObject=this.timeToSpawnObject;const o=r-t,h=this.floors.create(e,o,i/48);h&&(-1==h.state&&this.setFloorCollideEvent(h),h.setState(0),this.pipes.create(h.x,h.y+h.displayHeight/2,h.displayWidth,r-h.y-h.displayHeight/2,this.colors[this.colorIndex]),this.gems.createWithTiled(h.x,h.y-h.displayHeight/2,a),"both"==s?(this.spikes.createWithTile(h.x,h.y-h.displayHeight/2,h.displayWidth,"left"),this.spikes.createWithTile(h.x,h.y-h.displayHeight/2,h.displayWidth,"right")):this.spikes.createWithTile(h.x,h.y-h.displayHeight/2,h.displayWidth,s))}handleGameOver(){w.score=b.score,this.restart()}changeColor(){if(this.timeToChangeColor<=0){this.colorIndex=(this.colorIndex+1)%this.colors.length,this.timeToChangeColor=5;for(const e of this.pipes.get())e.fillColor=this.colors[this.colorIndex];switch(this.colorIndex){case 0:this.emitter.setColorHitEmitter("red");break;case 1:this.emitter.setColorHitEmitter("blue");break;case 2:this.emitter.setColorHitEmitter("orange");break;case 3:this.emitter.setColorHitEmitter("green")}}}checkOutOfBound(){(this.ball.y>=this.ball.displayHeight/2+r||this.ball.x<=0)&&(console.log("Game Over"),this.audioManager.playDieAudio(),b.gameOver=!0)}move(){this.emitter.hitEmitter.visible&&this.emitter.moveHitEmitter(this.floorSpeed*this.delta/7,this.floorDownSpeed*this.delta/7),0!=this.ball.x&&this.ball.setX(250),this.floors.move(this.floorSpeed*this.delta/7,this.floorDownSpeed*this.delta/7),this.pipes.move(this.floorSpeed*this.delta/7,this.floorDownSpeed*this.delta/7),this.spikes.move(this.floorSpeed*this.delta/7,this.floorDownSpeed*this.delta/7),this.gems.move(this.floorSpeed*this.delta/7,this.floorDownSpeed*this.delta/7),this.hitPoints.move(this.floorSpeed*this.delta/7,this.floorDownSpeed*this.delta/7)}update(e){this.delta=e,this.ball.rotation+=3*Phaser.Math.DEG_TO_RAD*this.delta/7,this.emitter.fireEmitter.visible&&this.emitter.fireEmitter.setPosition(this.ball.x,this.ball.y),this.timeToFire<=0&&(this.audioManager.pauseFireAudio(),this.emitter.stopFireEmitter()),b.start&&(this.perfect?(this.combo>=2?this.comboDisplay.setText(`Perfect x${this.combo}`):this.comboDisplay.setText("Perfect"),this.comboDisplay.setPosition(this.ball.x,this.ball.y-this.ball.displayWidth/2-this.comboDisplay.displayHeight/2-30).setAlpha(1)):this.comboDisplay.setAlpha(0),this.countTimeToSpawnObject-=Math.round(1*this.delta/7),this.move())}restart(){b.score=0,b.start=!1,b.gameOver=!1,this.emitter.stopHitEmitter(),this.emitter.stopFireEmitter(),this.ball.setVelocity(0,0),this.timeToChangeColor=5,this.countTimeToSpawnObject=this.timeToSpawnObject,this.comboDisplay.setAlpha(0),this.combo=0,this.timeToFire=0,this.colorIndex=0,this.emitter.setColorHitEmitter("red"),this.floors.clear(),this.hitPoints.clear(),this.gems.clear(),this.spikes.clear(),this.pipes.clear(),this.audioManager.pauseFireAudio(),this.ball.setPosition(250,35)}changeBall(e){this.ball.setTexture(e),this.ball.setScale(50/this.ball.width)}}x.instance=null;class b extends Phaser.Scene{constructor(){super({key:"Play Scene"})}create(){console.log("create play scene"),this.audioManager=d.getInstance(this),this.level=1,this.map=this.make.tilemap({key:"level1"}),this.matter.world.setGravity(0,.4),b.start=!1,b.gameOver=!1,b.score=0,this.objectManager=x.getInstance(this),this.balls=l,this.currentBall=0,this.scoreDisplay=this.add.text(0,0,`${b.score}`,{fontSize:"180px",fontFamily:"Arial",color:"#cccccc",testString:"123y2"}).setAlpha(.5).setOrigin(.5).setDepth(0),this.scoreDisplay.setPosition(o/2,r/2*.5),this.add.text(10,10,"II",{fontSize:"32px",fontFamily:"Arial",color:"#000000",testString:"123y2"}).setOrigin(0).setInteractive().on("pointerdown",(()=>{this.scene.pause("Play Scene"),this.scene.isSleeping("Pause Scene")?this.scene.wake("Pause Scene"):this.scene.launch("Pause Scene"),this.audioManager.pauseSound()})),this.highScoreDisplay=this.add.text(o/2,10,`High Score: ${b.highScore}`,{fontSize:"32px",fontFamily:"Arial",color:"#000000"}).setOrigin(.5,0),this.levelNotify=this.add.text(o/2,100,`Level ${this.level}`,{fontSize:"64px",fontFamily:"Arial",color:"#0000ff"}).setOrigin(.5,0).setAlpha(0).setDepth(10),this.objectManager.initial(),this.levelUp("level1")}update(e,t){this.scene.isVisible("Play Scene")||(this.restart(),this.levelUp("level1"),this.scene.sleep("Play Scene")),this.matter.world.setGravity(0,Math.min(.5*t/7,1.2)),this.currentBall!=c.chosenBall&&(this.currentBall=c.chosenBall,this.objectManager.changeBall(this.balls[this.currentBall])),b.score>b.highScore&&this.highScoreDisplay.setText(`HighScore: ${b.score}`),b.gameOver&&(this.restart(),this.levelUp("level1"),this.scene.isSleeping("Game Over Scene")?(this.scene.sleep("Play Scene"),this.scene.wake("Game Over Scene")):this.scene.switch("Game Over Scene")),this.objectManager.changeColor(),this.scoreDisplay.setText(`${b.score}`),this.objectManager.checkOutOfBound(),this.objectManager.update(t)}loadObjectsFromTilemap(){const e=this.map.getObjectLayer("objects");e&&(this.tiledObject=e.objects,this.tiledObject.forEach((e=>{"pipe"==e.type&&e.x&&e.height&&e.x&&e.width&&e.properties&&this.objectManager.createObject(e.x,e.height,e.width,e.properties[1].value,e.properties[0].value)})))}restart(){clearTimeout(this.levelUpTimeout),this.objectManager.handleGameOver(),this.level=1}levelUp(e){this.objectManager.restart(),this.map.destroy(),this.map=this.make.tilemap({key:e}),this.loadObjectsFromTilemap(),this.levelNotify.setText(`Level ${this.level}`),this.levelNotifyTween&&(this.tweens.remove(this.levelNotifyTween),this.levelNotify.setAlpha(0)),this.levelNotifyTween=this.add.tween({targets:this.levelNotify,duration:300,alpha:1,yoyo:!0,repeat:3}),this.level=(this.level+1)%3==0?1:(this.level+1)%3,this.levelUpTimeout=setTimeout((()=>{this.levelUp(`level${this.level}`)}),4e4)}}class w extends Phaser.Scene{constructor(){super({key:"Game Over Scene"})}create(){console.log("Create Game Over Scene"),this.audioManager=d.getInstance(this.scene.get("Play Scene")),this.add.text(o/2,100,"Game Over",{color:"#000000",fontSize:"32px",fontFamily:"Arial"}).setOrigin(.5);const e=this.add.image(o/2,r/2,"replay-button").setInteractive().setScale(.2).on("pointerdown",(()=>{this.scene.isSleeping("Play Scene")?(this.scene.sleep("Game Over Scene"),this.scene.wake("Play Scene")):this.scene.switch("Play Scene")}));this.add.image(o/2,e.y+e.displayHeight/2+50,"home-button").setInteractive().setScale(.2).setOrigin(.5,0).on("pointerdown",(()=>{this.scene.isSleeping("Start Scene")?(this.scene.sleep("Game Over Scene"),this.scene.wake("Start Scene")):this.scene.switch("Start Scene")})),this.scoreDisplay=this.add.text(100,100,`Score: ${w.score}`,{fontSize:"32px",fontFamily:"Arial",color:"#000000",testString:"1234y",align:"center"}).setStroke("black",1).setInteractive().setOrigin(.5).setPosition(o/2,r/2*.5),this.highScoreDisplay=this.add.text(100,200,`High Score: ${b.highScore}`,{fontSize:"32px",fontFamily:"Arial",color:"#000000",testString:"1234y",align:"center"}).setStroke("black",1).setInteractive().setOrigin(.5).setPosition(o/2,r/2*.7)}update(){w.score>b.highScore&&(b.highScore=w.score,localStorage.setItem("highScore",b.highScore.toString())),this.scoreDisplay.setText(`Score: ${w.score}`),this.highScoreDisplay.setText(`High Score: ${b.highScore}`)}}class v extends Phaser.Scene{constructor(){super({key:"Start Scene"})}create(){console.log("Create Start Scene"),this.audioManager=d.getInstance(this.scene.get("Play Scene")),this.createButton(),this.text=this.add.text(60,100,"Bouncing\n   Ball 2",{fontSize:64*o/400+"px",fontFamily:"Arial",color:"#000000",testString:"1234y"}).setStroke("black",1).setOrigin(.5).setPosition(o/2,r/2*.5)}createButton(){const e=this.add.image(o/2,r/2,"start-button").setScale(.2).setInteractive(),t=this.add.image(o/2,e.y+e.displayHeight/2+50,"shop-button").setScale(.2).setOrigin(.5,0).setInteractive();e.on("pointerdown",(()=>{this.tweens.add({targets:e,scale:.1,duration:500,yoyo:!0,onComplete:()=>{this.tweens.add({targets:[this.text],y:-200,duration:1e3,yoyo:!1,alpha:0,onComplete:()=>{this.tweens.add({targets:[this.text],y:r/2*.5,duration:1e3,yoyo:!1,alpha:1}),this.scene.isSleeping("Play Scene")?(this.scene.sleep("Start Scene"),this.scene.wake("Play Scene")):this.scene.switch("Play Scene")}}),this.tweens.add({targets:[e,t,i],y:800,duration:1e3,alpha:0,yoyo:!0})}})})),t.on("pointerdown",(()=>{this.scene.switch("Shop Scene")}));const i=this.add.text(o/2,t.y+t.displayHeight/2+100,"Setting",{fontFamily:"Arial",fontSize:"32px",color:"#000000"}).setOrigin(.5).setInteractive().on("pointerdown",(()=>{this.scene.switch("Setting Scene")}))}}class A extends Phaser.Scene{constructor(){super({key:"Loading Scene"})}preload(){this.graphics=this.add.graphics(),this.newGraphics=this.add.graphics();const e=new Phaser.Geom.Rectangle(10,200,o-20,50),t=new Phaser.Geom.Rectangle(15,205,100,40);this.graphics.fillStyle(16777215,1),this.graphics.fillRectShape(e),this.newGraphics.fillStyle(3508194,1),this.newGraphics.fillRectShape(t),this.loadingText=this.add.text(o/2,260,"Loading: ",{fontSize:"32px",color:"#000000"}).setOrigin(.5),this.load.pack("preload","./assets/pack.json","preload"),this.getDataFromStorage(),this.load.on("progress",this.updateBar,{newGraphics:this.newGraphics,loadingText:this.loadingText}),this.load.on("complete",(()=>{this.scene.switch("Start Scene")}))}updateBar(e){this.newGraphics.clear(),this.newGraphics.fillStyle(3508194,1),this.newGraphics.fillRectShape(new Phaser.Geom.Rectangle(15,205,e*(o-30),40)),e*=100,this.loadingText.setText("Loading: "+e.toFixed(2)+"%")}getDataFromStorage(){const e=localStorage.getItem("chosenBall");c.chosenBall=e?parseInt(e):0;const t=localStorage.getItem("totalGem");c.playerGem=t?parseInt(t):0,localStorage.getItem("boughtBall")||localStorage.setItem("boughtBall","0");const i=localStorage.getItem("highScore");b.highScore=null!=i?parseInt(i):0}}class P extends Phaser.Scene{constructor(){super({key:"Pause Scene"})}create(){console.log("Create Pause Scene"),this.audioManager=d.getInstance(this.scene.get("Play Scene"));const e=this.add.rectangle(o/2,r/2,300,200,15464954,.6).setStrokeStyle(1,0,.6);this.add.text(e.x,e.y-e.displayHeight/2+10,"Resume",{fontFamily:"Arial",color:"0x000000",fontSize:"32px"}).setOrigin(.5,0).setInteractive().on("pointerdown",(()=>{this.scene.resume("Play Scene"),this.scene.sleep("Pause Scene"),this.audioManager.resumeSound()})),this.add.text(e.x,e.y-e.displayHeight/2+110,"Home",{fontFamily:"Arial",color:"0x000000",fontSize:"32px"}).setOrigin(.5,0).setInteractive().on("pointerdown",(()=>{this.scene.resume("Play Scene"),this.scene.setVisible(!1,"Play Scene"),this.scene.switch("Start Scene")}))}}class O extends Phaser.Scene{constructor(){super({key:"Setting Scene"}),this.mute=0}create(){this.audioManager=d.getInstance(this.scene.get("Play Scene")),this.add.image(10,10,"back").setOrigin(0).setScale(.1).setInteractive().on("pointerdown",(()=>{this.scene.switch("Start Scene")})),this.text=this.add.text(10,100,"Music",{fontSize:32*o/400+"px",fontFamily:"Arial",color:"#000000",testString:"1234y"}).setOrigin(0,0);const e=this.add.sprite(o-10,120,"speaker",0).setScale(1.5).setInteractive().setOrigin(1,.5);e.on("pointerdown",(()=>{this.mute=1-this.mute,e.setFrame(this.mute),this.mute?this.audioManager.mute():this.audioManager.unMute()}))}}const k={type:a().AUTO,width:o,height:r,backgroundColor:"#ebf9fa",parent:"game",physics:{default:"matter",matter:{enableSleeping:!0}},scene:[A,v,b,w,c,P,O]};class T{constructor(){new Phaser.Game(k)}static getInstance(){return T.instance||(T.instance=new T),T.instance}}T.instance=null,new class{constructor(){console.log("Game created"),T.getInstance()}}}},i={};function s(e){var a=i[e];if(void 0!==a)return a.exports;var o=i[e]={exports:{}};return t[e].call(o.exports,o,o.exports,s),o.exports}s.m=t,e=[],s.O=(t,i,a,o)=>{if(!i){var r=1/0;for(c=0;c<e.length;c++){for(var[i,a,o]=e[c],h=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((e=>s.O[e](i[l])))?i.splice(l--,1):(h=!1,o<r&&(r=o));if(h){e.splice(c--,1);var n=a();void 0!==n&&(t=n)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,a,o]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var a,o,[r,h,l]=i,n=0;if(r.some((t=>0!==e[t]))){for(a in h)s.o(h,a)&&(s.m[a]=h[a]);if(l)var c=l(s)}for(t&&t(i);n<r.length;n++)o=r[n],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},i=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var a=s.O(void 0,[216],(()=>s(478)));a=s.O(a)})();