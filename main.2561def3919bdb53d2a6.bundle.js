(()=>{"use strict";var e,t={63:(e,t,i)=>{var s=i(260),a=i.n(s);class o{constructor(e){this.scene=e}static getInstance(e){return o.instance||(o.instance=new o(e)),o.instance}init(){this.gemAudio=this.scene.sound.add("gem-audio"),this.gemAudio.setRate(1.5),this.hitAudio=this.scene.sound.add("hit-audio"),this.hitAudio.setRate(1.5),this.dieAudio=this.scene.sound.add("die-audio"),this.fireAudio=this.scene.sound.add("fire-audio").setLoop(!0),this.spikeAudio=this.scene.sound.add("spike-audio"),this.spikeAudio.setRate(1.5)}playGemAudio(){this.gemAudio.play()}pauseGemAudio(){this.gemAudio.pause()}playHitAudio(){this.hitAudio.play()}pauseHitAudio(){this.hitAudio.pause()}playDieAudio(){this.dieAudio.play()}pauseDieAudio(){this.dieAudio.pause()}playFireAudio(){this.fireAudio.play()}pauseFireAudio(){this.fireAudio.pause()}playSpikeAudio(){this.spikeAudio.play()}pauseSpikeAudio(){this.spikeAudio.pause()}}o.instance=null;const l=Math.min(500,window.innerWidth),h=window.innerHeight;class r extends Phaser.Scene{constructor(){super({key:"Shop Scene"})}preload(){}create(){this.balls=[],this.ballKey=["normalball","basketball","football","volleyball","tennisball","pokeball","cannonbolt","dragonball"],this.gemNeedToPay=[0,10,20,30,40,50,60,70],this.gemNeedToPayDisplay=[],this.getBoughtBall(),this.add.image(10,10,"back").setOrigin(0).setScale(.1).setInteractive().on("pointerdown",(()=>{this.scene.switch("Start Scene")})),this.add.text(l/2,10,"Shop",{fontSize:"32px",fontFamily:"Arial",color:"#000000",testString:"1234y"}).setStroke("black",1).setOrigin(.5,0);const e=this.add.image(l-10,10,"gem").setOrigin(1,0);e.setScale(50/e.displayWidth),this.playerGameDisplay=this.add.text(e.x-e.displayWidth-10,10,`${r.playerGem}`,{fontSize:"16px",color:"0x000000"}).setOrigin(1,0),this.createBallList()}createBall(e,t,i,s){const a=this.add.image(t,i,e).setOrigin(0);a.setScale(100/a.width).setInteractive().on("pointerdown",(()=>{if(r.playerGem>=this.gemNeedToPay[s]){if(r.playerGem-=this.gemNeedToPay[s],this.gemNeedToPay[s]>0){const e=localStorage.getItem("boughtBall");e&&localStorage.setItem("boughtBall",e+` ${s}`)}r.chosenBall=s,this.gemNeedToPay[s]=0,this.gemNeedToPayDisplay[s].setText("0"),localStorage.setItem("chosenBall",s.toString()),localStorage.setItem("totalGem",r.playerGem.toString());for(const e of this.balls)e.setAlpha(1);a.setAlpha(.3)}})),r.chosenBall==s&&a.setAlpha(.3),this.balls.push(a)}createGemDisplay(e,t,i){const s=this.add.text(e,t,`${i}`,{color:"0x000000",fontSize:"16px"}).setOrigin(.5);s.setY(t+s.displayHeight/2),this.gemNeedToPayDisplay.push(s)}createBallList(){const e=(l-100*Math.floor(l/100))/2,t=Math.floor(l/100);for(let i=0;i<this.ballKey.length;i++){const s=i%t,a=Math.floor(i/t);this.createBall(this.ballKey[i],e+100*s,50*a*2+100+16*a,i),this.createGemDisplay(e+100*s+50,50*a*2+100+100+16*a,this.gemNeedToPay[i])}}getBoughtBall(){const e=localStorage.getItem("boughtBall");if(e){const t=e.split(" ");for(const e of t)this.gemNeedToPay[parseInt(e)]=0}}update(){this.playerGameDisplay.setText(`${r.playerGem}`)}}class n{constructor(e){this.scene=e,this.floors=[],this.pipes=[],this.gems=[],this.spikes=[],this.hitPoints=[],this.colors=[15759480,10146549,16109717,11336381],this.floorSpeed=-2.5,this.jumpSpeed=-10,this.fallSpeed=10,this.timeToChangeColor=5,this.colorIndex=0,this.timeToSpawnPipe=50,this.cnt=this.timeToSpawnPipe,this.floorDownSpeed=2,this.delta=7,this.timeToFire=0,this.perfect=!1,this.comboDisplay=this.scene.add.text(100,200,"Perfect",{fontSize:"20px",fontFamily:"Arial",color:"#1c2070",testString:"1234y"}).setAlpha(0).setOrigin(.5).setDepth(10),this.combo=0,this.audioManager=o.getInstance(this.scene)}static getInstance(e){return n.instance||(n.instance=new n(e)),n.instance}initial(){for(let e=2;e<=4;e++)this.createFloor(Math.floor(e*l/4),l,1);this.initialBall(),this.initialEmitter(),this.audioManager.init()}initialBall(){this.ball=this.scene.matter.add.image(0,0,"normalball"),this.ball.setScale(50/this.ball.width).setCircle(this.ball.displayWidth/2).setFriction(.005).setBounce(0).setMass(3).setDepth(5).setPosition(l/2,35).setOnCollide((()=>{this.audioManager.playHitAudio(),this.ball.setVelocity(0,Math.max(this.jumpSpeed*this.delta/7,-12)),c.score++,this.timeToChangeColor--,c.start=!0,this.timeToFire>0&&this.timeToFire--,this.emitter.setPosition(this.ball.x,this.ball.y+this.ball.displayHeight/2),this.emitter.visible||this.emitter.setVisible(!0),this.perfect?(this.emitter.gravityX=0,this.emitter.gravityY=-500*this.delta/7,this.emitter.speed=300*this.delta/7,this.emitter.explode(10)):(this.emitter.gravityX=-500*this.delta/7,this.emitter.gravityY=0,this.emitter.speed=150*this.delta/7,this.emitter.explode(3))})),this.scene.input.on("pointerdown",(()=>{c.gameOver||this.ball.setVelocity(0,this.fallSpeed*this.delta/7)}))}initialEmitter(){this.emitter=this.scene.add.particles(100,150,"red",{lifespan:2e3,speed:{min:100,max:200},scale:{start:.6,end:0},gravityX:-500,emitting:!1}).setScale(.2),this.fireEmitter=this.scene.add.particles(this.ball.x,this.ball.y,"whitefire",{color:[16436258,16291840,16266752,10421252],x:0,y:0,lifespan:500,angle:{min:-100,max:-80},scale:{start:.4,end:0,ease:"sine.in"},speed:{min:200,max:300},alpha:{start:.7,end:.3},advance:2e3,emitting:!1,colorEase:"quart.out"}).setDepth(3).setVisible(!1)}setFloorCollideEvent(e){e.setOnCollide((()=>{if(e){e.setState(1);const t=this.pipes.filter((t=>t.x==e.x));t[0]&&t[0].setState(1);const i=this.gems.filter((t=>{if(e)return t.x==e.x}));i[0]&&i[0].setState(1);const s=this.spikes.filter((t=>{if(e)return t.x<=e.x+e.displayWidth/2&&t.x>=e.x-e.displayWidth/2}));s[0]&&s[0].setState(1),this.createHitpoint(e.x,e.y,e.displayWidth,e.displayHeight,this.ball.x-e.x)}}))}createFloor(e,t,i){let s;const a=this.floors.filter((e=>e.x+e.displayWidth/2<=0));0==a.length?(s=this.scene.matter.add.image(0,0,"floor").setBounce(0),this.setFloorCollideEvent(s),console.log("create New Floor"),this.floors.push(s)):s=a[0],s&&(s.setStatic(!0).setY(t),null==e?s.setX(l+s.displayWidth/2):s.setX(e),s.scaleX=i,s.setState(0),s.setDepth(2),this.createPipe(s.x,s.y+s.displayHeight/2+h/2,s.displayWidth,h),this.createGem(s.x,s.y-s.displayHeight/2),this.createSpike(s.x,s.y-s.displayHeight/2,s.displayWidth,s.scaleX))}createPipe(e,t,i,s){let a;const o=this.pipes.filter((e=>e.x+e.displayWidth/2<=0));0==o.length?(a=this.scene.add.rectangle(e,t,i,s,16711680).setDepth(0),console.log("create New Pipe"),this.pipes.push(a)):a=o[0],a&&(a.displayWidth=i,a.displayHeight=s,a.setPosition(e,t),a.setState(0),a.fillColor=this.colors[this.colorIndex])}createGem(e,t){if(0!=Phaser.Math.Between(0,100)%5)return;let i;const s=this.gems.filter((e=>e.x+e.displayWidth/2<=0||0==e.alpha));0==s.length?(i=this.scene.add.image(e,t,"gem"),i.setScale(20/i.width),this.gems.push(i),console.log("create New Gem")):i=s[0],i&&(0==Phaser.Math.Between(1,100)%5?(i.setTexture("firegem"),i.setScale(20/i.width)):(i.setTexture("gem"),i.setScale(20/i.width)),i.setState(0),i.setAlpha(1),i.setPosition(e,t-i.displayHeight/2))}createHitpoint(e,t,i,s,a){let o;const l=this.hitPoints.filter((e=>e.x+e.displayWidth/2<=0));if(0==l.length?(o=this.scene.add.rectangle(e,t,i/3,s,16711680).setDepth(3),this.hitPoints.push(o),console.log("create New Spike")):(o=l[0],o&&(o.setY(t),o.scaleX=i/(3*o.width))),null!=o){if(a<-i/6)o.setX(e-i/3),this.perfect=!1,this.combo=0,this.spikes.filter((t=>t.x<e&&t.x>e-i/2))[0]&&this.timeToFire<=0&&(c.gameOver=!0,this.audioManager.playSpikeAudio());else if(a>i/6)o.setX(e+i/3),this.combo=0,this.perfect=!1,this.spikes.filter((t=>t.x>e&&t.x<e+i/2))[0]&&this.timeToFire<=0&&(c.gameOver=!0,this.audioManager.playSpikeAudio());else{o.setX(e),this.combo++,this.perfect=!0;const t=this.gems.filter((t=>t.x==e))[0];if(t&&t.alpha){if(t.setAlpha(0),c.score+=5,"firegem"==t.texture.key){if(this.timeToFire<=0){this.fireEmitter.start(),this.fireEmitter.setVisible(!0);const e=document.getElementById("game");e&&(e.style.backgroundColor="#000000"),this.audioManager.playFireAudio()}this.timeToFire+=20}else r.playerGem++,localStorage.setItem("totalGem",r.playerGem.toString());this.audioManager.playGemAudio()}}o.fillColor=this.colors[this.colorIndex],o.setState(1)}}createSpike(e,t,i,s){if(s<1.1)return;if(3!=Phaser.Math.Between(0,5))return;const a=Phaser.Math.Between(0,1);let o;const l=this.spikes.filter((e=>e.x+e.displayWidth/2<=0));0==l.length?(o=this.scene.add.image(e,t,"spike").setScale(.3),this.spikes.push(o),console.log("create New Spike")):o=l[0],o&&(o.setState(0),o.setAlpha(1).setDepth(0),0==a?o.setPosition(e-i/2+o.displayWidth/2,t-o.displayHeight/2):o.setPosition(e+i/2-o.displayWidth/2,t-o.displayHeight/2))}createObject(){this.ball.rotation+=3*Phaser.Math.DEG_TO_RAD*this.delta/7,this.cnt-=Math.round(1*this.delta/7),this.cnt<=0&&(this.cnt=this.timeToSpawnPipe,this.createFloor(null,Phaser.Math.Between(.5*h,.6*h),Phaser.Math.FloatBetween(1,2.5)/2))}handleGameOver(){d.score=c.score,this.restart(),this.scene.scene.switch("Game Over Scene")}changeColor(){if(this.timeToChangeColor<=0){this.colorIndex=(this.colorIndex+1)%this.colors.length,this.timeToChangeColor=5;for(const e of this.pipes)e.fillColor=this.colors[this.colorIndex];switch(this.colorIndex){case 0:this.emitter.setTexture("red");break;case 1:this.emitter.setTexture("blue");break;case 2:this.emitter.setTexture("orange");break;case 3:this.emitter.setTexture("green")}}}checkOutOfBound(){(this.ball.y>=this.ball.displayHeight/2+h||this.ball.x<=0)&&(console.log("Game Over"),this.audioManager.playDieAudio(),c.gameOver=!0)}update(e){this.delta=e,this.fireEmitter.visible&&this.fireEmitter.setPosition(this.ball.x,this.ball.y),this.timeToFire<=0&&(this.audioManager.pauseFireAudio(),this.fireEmitter.stop(),this.fireEmitter.setVisible(!1)),c.start&&(this.perfect?(this.combo>=2?this.comboDisplay.setText(`Perfect x${this.combo}`):this.comboDisplay.setText("Perfect"),this.comboDisplay.setPosition(this.ball.x,this.ball.y-this.ball.displayWidth/2-this.comboDisplay.displayHeight/2-30).setAlpha(1)):this.comboDisplay.setAlpha(0),this.createObject(),this.moveFloor())}moveFloor(){this.emitter.setX(this.emitter.x+this.floorSpeed*this.delta/7),this.emitter.setY(this.emitter.y+this.floorDownSpeed*this.delta/7),0!=this.ball.x&&this.ball.setX(l/2),this.moveGameObject(this.floors),this.moveGameObject(this.pipes),this.moveGameObject(this.spikes),this.moveGameObject(this.gems),this.moveGameObject(this.hitPoints)}moveGameObject(e){for(const t of e)t.setX(t.x+this.floorSpeed*this.delta/7),t.state&&t.setY(t.y+this.floorDownSpeed*this.delta/7)}restart(){c.score=0,c.start=!1,c.gameOver=!1,this.emitter.setVisible(!1),this.ball.setVelocity(0,0),this.timeToChangeColor=5,this.cnt=this.timeToSpawnPipe,this.comboDisplay.setAlpha(0),this.combo=0,this.timeToFire=0,this.fireEmitter.stop(),this.fireEmitter.setVisible(!1),this.clearArr(this.floors),this.clearArr(this.pipes),this.clearArr(this.spikes),this.clearArr(this.hitPoints),this.clearArr(this.gems),this.audioManager.pauseFireAudio();for(let e=2;e<=4;e++)this.createFloor(Math.floor(e*l/4),l,1);this.ball.setPosition(l/2,35)}clearArr(e){for(const t of e)t.setX(-1e3)}changeBall(e){this.ball.setTexture(e),this.ball.setScale(50/this.ball.width)}}n.instance=null;class c extends Phaser.Scene{constructor(){super({key:"Play Scene"})}preload(){}create(){console.log("create play scene"),this.matter.world.setGravity(0,.4),c.start=!1,c.gameOver=!1,c.score=0,this.objectManager=n.getInstance(this),this.balls=["normalball","basketball","football","volleyball","tennisball","pokeball","cannonbolt","dragonball"],this.currentBall=0,this.scoreDisplay=this.add.text(0,0,`${c.score}`,{fontSize:"180px",fontFamily:"Arial",color:"#cccccc",testString:"123y2"}).setAlpha(.5).setOrigin(.5).setDepth(0),this.scoreDisplay.setPosition(l/2,h/2*.5),this.highScoreDisplay=this.add.text(l/2,10,`High Score: ${c.highScore}`,{fontSize:"32px",fontFamily:"Arial",color:"#000000"}).setOrigin(.5,0),this.objectManager.initial()}update(e,t){this.matter.world.setGravity(0,Math.min(.5*t/7,1.2)),this.currentBall!=r.chosenBall&&(this.currentBall=r.chosenBall,this.objectManager.changeBall(this.balls[this.currentBall])),c.score>c.highScore&&this.highScoreDisplay.setText(`HighScore: ${c.score}`),c.gameOver&&this.objectManager.handleGameOver(),this.objectManager.changeColor(),this.scoreDisplay.setText(`${c.score}`),this.objectManager.checkOutOfBound(),this.objectManager.update(t)}}class d extends Phaser.Scene{constructor(){super({key:"Game Over Scene"})}preload(){}create(){const e=this.add.image(l/2,h/2,"replay-button").setInteractive().setScale(.2).on("pointerdown",(()=>{this.scene.switch("Play Scene")}));this.add.image(l/2,e.y+e.displayHeight/2+50,"home-button").setInteractive().setScale(.2).setOrigin(.5,0).on("pointerdown",(()=>{this.scene.switch("Start Scene")})),this.scoreDisplay=this.add.text(100,100,`Score: ${d.score}`,{fontSize:"32px",fontFamily:"Arial",color:"#000000",testString:"1234y",align:"center"}).setStroke("black",1).setInteractive().setOrigin(.5).setPosition(l/2,h/2*.5),this.highScoreDisplay=this.add.text(100,200,`High Score: ${c.highScore}`,{fontSize:"32px",fontFamily:"Arial",color:"#000000",testString:"1234y",align:"center"}).setStroke("black",1).setInteractive().setOrigin(.5).setPosition(l/2,h/2*.7)}update(){d.score>c.highScore&&(c.highScore=d.score,localStorage.setItem("highScore",c.highScore.toString())),this.scoreDisplay.setText(`Score: ${d.score}`),this.highScoreDisplay.setText(`High Score: ${c.highScore}`)}}class p extends Phaser.Scene{constructor(){super({key:"Start Scene"})}preload(){}create(){this.createButton(),this.text=this.add.text(60,100,"Bouncing\n   Ball 2",{fontSize:64*l/400+"px",fontFamily:"Arial",color:"#000000",testString:"1234y"}).setStroke("black",1).setOrigin(.5).setPosition(l/2,h/2*.5),this.getDataFromStorage()}getDataFromStorage(){const e=localStorage.getItem("chosenBall");r.chosenBall=e?parseInt(e):0;const t=localStorage.getItem("totalGem");r.playerGem=t?parseInt(t):0,localStorage.getItem("boughtBall")||localStorage.setItem("boughtBall","0");const i=localStorage.getItem("highScore");c.highScore=null!=i?parseInt(i):0}createButton(){const e=this.add.image(l/2,h/2,"start-button").setScale(.2).setInteractive(),t=this.add.image(l/2,e.y+e.displayHeight/2+50,"shop-button").setScale(.2).setOrigin(.5,0).setInteractive();e.on("pointerdown",(()=>{this.tweens.add({targets:e,scale:.1,duration:500,yoyo:!0,onComplete:()=>{this.tweens.add({targets:[this.text],y:-200,duration:1e3,yoyo:!1,alpha:0,onComplete:()=>{this.tweens.add({targets:[this.text],y:h/2*.5,duration:1e3,yoyo:!1,alpha:1}),this.scene.switch("Play Scene")}}),this.tweens.add({targets:[e,t],y:800,duration:1e3,alpha:0,yoyo:!0})}})})),t.on("pointerdown",(()=>{this.scene.switch("Shop Scene")}))}}class g extends Phaser.Scene{constructor(){super({key:"Loading Scene"})}preload(){this.graphics=this.add.graphics(),this.newGraphics=this.add.graphics();const e=new Phaser.Geom.Rectangle(10,200,l-20,50),t=new Phaser.Geom.Rectangle(15,205,100,40);this.graphics.fillStyle(16777215,1),this.graphics.fillRectShape(e),this.newGraphics.fillStyle(3508194,1),this.newGraphics.fillRectShape(t),this.loadingText=this.add.text(l/2,260,"Loading: ",{fontSize:"32px",color:"#000000"}).setOrigin(.5),this.load.image("normalball","assets/sprites/ball.png"),this.load.image("basketball","assets/images/ball.png"),this.load.image("pokeball","assets/images/poke-ball.png"),this.load.image("football","assets/images/football.png"),this.load.image("volleyball","assets/images/volleyball.png"),this.load.image("tennisball","assets/images/tennisball.png"),this.load.image("cannonbolt","assets/images/cannonbolt.png"),this.load.image("dragonball","assets/images/dragonball.png"),this.load.image("pipe","assets/images/up-pipe.png"),this.load.image("floor","assets/images/floor.png"),this.load.image("gem","assets/images/gem.png"),this.load.image("spike","assets/images/triangle.png"),this.load.image("red","assets/images/red-partical.png"),this.load.image("blue","assets/images/blue-partical.png"),this.load.image("orange","assets/images/orange-partical.png"),this.load.image("green","assets/images/green-partical.png"),this.load.image("blackfire","assets/images/blackfire.png"),this.load.image("whitefire","assets/images/whitefire.png"),this.load.image("firegem","assets/images/fire-gem.png"),this.load.image("start-button","assets/images/start-button.png"),this.load.image("shop-button","assets/images/shop.png"),this.load.image("replay-button","assets/images/replay.png"),this.load.image("home-button","assets/images/home.png"),this.load.image("back","assets/images/back.png"),this.load.audio("gem-audio","assets/audios/coin.wav"),this.load.audio("hit-audio","assets/audios/point.wav"),this.load.audio("die-audio","assets/audios/die.wav"),this.load.audio("spike-audio","assets/audios/hit.wav"),this.load.audio("fire-audio","assets/audios/fire.mp3"),this.load.on("progress",this.updateBar,{newGraphics:this.newGraphics,loadingText:this.loadingText}),this.load.on("complete",(()=>{this.scene.switch("Start Scene")}))}updateBar(e){this.newGraphics.clear(),this.newGraphics.fillStyle(3508194,1),this.newGraphics.fillRectShape(new Phaser.Geom.Rectangle(15,205,e*(l-30),40)),e*=100,this.loadingText.setText("Loading: "+e.toFixed(2)+"%")}}const m={type:a().AUTO,width:l,height:h,backgroundColor:"#ebf9fa",parent:"game",physics:{default:"matter",matter:{enableSleeping:!0}},scene:[g,p,c,d,r]};class u{constructor(){new Phaser.Game(m)}static getInstance(){return u.instance||(u.instance=new u),u.instance}}u.instance=null,new class{constructor(){console.log("Game created"),u.getInstance()}}}},i={};function s(e){var a=i[e];if(void 0!==a)return a.exports;var o=i[e]={exports:{}};return t[e].call(o.exports,o,o.exports,s),o.exports}s.m=t,e=[],s.O=(t,i,a,o)=>{if(!i){var l=1/0;for(c=0;c<e.length;c++){for(var[i,a,o]=e[c],h=!0,r=0;r<i.length;r++)(!1&o||l>=o)&&Object.keys(s.O).every((e=>s.O[e](i[r])))?i.splice(r--,1):(h=!1,o<l&&(l=o));if(h){e.splice(c--,1);var n=a();void 0!==n&&(t=n)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,a,o]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var a,o,[l,h,r]=i,n=0;if(l.some((t=>0!==e[t]))){for(a in h)s.o(h,a)&&(s.m[a]=h[a]);if(r)var c=r(s)}for(t&&t(i);n<l.length;n++)o=l[n],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},i=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var a=s.O(void 0,[216],(()=>s(63)));a=s.O(a)})();